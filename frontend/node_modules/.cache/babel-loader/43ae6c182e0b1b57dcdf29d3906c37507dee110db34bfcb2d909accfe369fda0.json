{"ast":null,"code":"import{useState,useEffect}from'react';import{getAuthenticatedUser,getBestRatedBooks}from'./common';// eslint-disable-next-line import/prefer-default-export\nexport function useUser(){const[connectedUser,setConnectedUser]=useState(null);const[auth,setAuth]=useState(false);const[userLoading,setUserLoading]=useState(true);useEffect(()=>{async function getUserDetails(){const{authenticated,user}=await getAuthenticatedUser();setConnectedUser(user);setAuth(authenticated);setUserLoading(false);}getUserDetails();},[]);return{connectedUser,auth,userLoading};}export function useBestRatedBooks(){const[bestRatedBooks,setBestRatedBooks]=useState({});useEffect(()=>{async function getRatedBooks(){const books=await getBestRatedBooks();setBestRatedBooks(books);}getRatedBooks();},[]);return{bestRatedBooks};}export function useFilePreview(file){var _file$,_fileInput$;const fileInput=(_file$=file[0])!==null&&_file$!==void 0?_file$:[];const[imgSrc,setImgSrc]=useState(null);useEffect(()=>{var _file$2;if(file&&((_file$2=file[0])===null||_file$2===void 0?void 0:_file$2.length)>0){const newUrl=URL.createObjectURL(file[0][0]);if(newUrl!==imgSrc){setImgSrc(newUrl);}}},[(_fileInput$=fileInput[0])===null||_fileInput$===void 0?void 0:_fileInput$.name]);return[imgSrc,setImgSrc];}","map":{"version":3,"names":["useState","useEffect","getAuthenticatedUser","getBestRatedBooks","useUser","connectedUser","setConnectedUser","auth","setAuth","userLoading","setUserLoading","getUserDetails","authenticated","user","useBestRatedBooks","bestRatedBooks","setBestRatedBooks","getRatedBooks","books","useFilePreview","file","_file$","_fileInput$","fileInput","imgSrc","setImgSrc","_file$2","length","newUrl","URL","createObjectURL","name"],"sources":["/home/lucille/Documents/Projet/Mon Vieux Grimoire - Projet 7/P7-Dev-Web-livres-main/frontend/src/lib/customHooks.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { getAuthenticatedUser, getBestRatedBooks } from './common';\n\n// eslint-disable-next-line import/prefer-default-export\nexport function useUser() {\n  const [connectedUser, setConnectedUser] = useState(null);\n  const [auth, setAuth] = useState(false);\n  const [userLoading, setUserLoading] = useState(true);\n\n  useEffect(() => {\n    async function getUserDetails() {\n      const { authenticated, user } = await getAuthenticatedUser();\n      setConnectedUser(user);\n      setAuth(authenticated);\n      setUserLoading(false);\n    }\n    getUserDetails();\n  }, []);\n\n  return { connectedUser, auth, userLoading };\n}\n\nexport function useBestRatedBooks() {\n  const [bestRatedBooks, setBestRatedBooks] = useState({});\n\n  useEffect(() => {\n    async function getRatedBooks() {\n      const books = await getBestRatedBooks();\n      setBestRatedBooks(books);\n    }\n    getRatedBooks();\n  }, []);\n\n  return { bestRatedBooks };\n}\n\nexport function useFilePreview(file) {\n  const fileInput = file[0] ?? [];\n  const [imgSrc, setImgSrc] = useState(null);\n\n  useEffect(() => {\n    if (file && file[0]?.length > 0) {\n      const newUrl = URL.createObjectURL(file[0][0]);\n\n      if (newUrl !== imgSrc) {\n        setImgSrc(newUrl);\n      }\n    }\n  }, [fileInput[0]?.name]);\n\n  return [imgSrc, setImgSrc];\n}\n"],"mappings":"AAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,oBAAoB,CAAEC,iBAAiB,KAAQ,UAAU,CAElE;AACA,MAAO,SAAS,CAAAC,OAAOA,CAAA,CAAG,CACxB,KAAM,CAACC,aAAa,CAAEC,gBAAgB,CAAC,CAAGN,QAAQ,CAAC,IAAI,CAAC,CACxD,KAAM,CAACO,IAAI,CAAEC,OAAO,CAAC,CAAGR,QAAQ,CAAC,KAAK,CAAC,CACvC,KAAM,CAACS,WAAW,CAAEC,cAAc,CAAC,CAAGV,QAAQ,CAAC,IAAI,CAAC,CAEpDC,SAAS,CAAC,IAAM,CACd,cAAe,CAAAU,cAAcA,CAAA,CAAG,CAC9B,KAAM,CAAEC,aAAa,CAAEC,IAAK,CAAC,CAAG,KAAM,CAAAX,oBAAoB,CAAC,CAAC,CAC5DI,gBAAgB,CAACO,IAAI,CAAC,CACtBL,OAAO,CAACI,aAAa,CAAC,CACtBF,cAAc,CAAC,KAAK,CAAC,CACvB,CACAC,cAAc,CAAC,CAAC,CAClB,CAAC,CAAE,EAAE,CAAC,CAEN,MAAO,CAAEN,aAAa,CAAEE,IAAI,CAAEE,WAAY,CAAC,CAC7C,CAEA,MAAO,SAAS,CAAAK,iBAAiBA,CAAA,CAAG,CAClC,KAAM,CAACC,cAAc,CAAEC,iBAAiB,CAAC,CAAGhB,QAAQ,CAAC,CAAC,CAAC,CAAC,CAExDC,SAAS,CAAC,IAAM,CACd,cAAe,CAAAgB,aAAaA,CAAA,CAAG,CAC7B,KAAM,CAAAC,KAAK,CAAG,KAAM,CAAAf,iBAAiB,CAAC,CAAC,CACvCa,iBAAiB,CAACE,KAAK,CAAC,CAC1B,CACAD,aAAa,CAAC,CAAC,CACjB,CAAC,CAAE,EAAE,CAAC,CAEN,MAAO,CAAEF,cAAe,CAAC,CAC3B,CAEA,MAAO,SAAS,CAAAI,cAAcA,CAACC,IAAI,CAAE,KAAAC,MAAA,CAAAC,WAAA,CACnC,KAAM,CAAAC,SAAS,EAAAF,MAAA,CAAGD,IAAI,CAAC,CAAC,CAAC,UAAAC,MAAA,UAAAA,MAAA,CAAI,EAAE,CAC/B,KAAM,CAACG,MAAM,CAAEC,SAAS,CAAC,CAAGzB,QAAQ,CAAC,IAAI,CAAC,CAE1CC,SAAS,CAAC,IAAM,KAAAyB,OAAA,CACd,GAAIN,IAAI,EAAI,EAAAM,OAAA,CAAAN,IAAI,CAAC,CAAC,CAAC,UAAAM,OAAA,iBAAPA,OAAA,CAASC,MAAM,EAAG,CAAC,CAAE,CAC/B,KAAM,CAAAC,MAAM,CAAGC,GAAG,CAACC,eAAe,CAACV,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAE9C,GAAIQ,MAAM,GAAKJ,MAAM,CAAE,CACrBC,SAAS,CAACG,MAAM,CAAC,CACnB,CACF,CACF,CAAC,CAAE,EAAAN,WAAA,CAACC,SAAS,CAAC,CAAC,CAAC,UAAAD,WAAA,iBAAZA,WAAA,CAAcS,IAAI,CAAC,CAAC,CAExB,MAAO,CAACP,MAAM,CAAEC,SAAS,CAAC,CAC5B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}